---
title: Devops retrospect
date: 2020-02-23 21:06:25
tags:
---

我之前在两个创业公司工作过，这两个公司在IT上都有比较严重的问题，就像书中主人公接手的公司。可惜这两个公司并没有像书中的那样，凤凰涅槃。

我工作的第一家创业公司曾经是国内最早最大的比特币交易所，但是后来由于各种原因销声匿迹了。

从我一加入这家公司开始，这家公司的IT团队就似乎一直处在救火状态。一方面现有系统无论从性能和功能上都无法满足客户需求，开发团队的进度始终无法满足业务需求。另一方面各种故障和紧急事态频发，又占用了技术团队大量时间救火。

现在反省下来主要由如下几个原因。

所处行业竞争激烈、环境动荡，数字资产交易系统本身对系统的无论从功能、性能还是安全性上有极高要求。但公司作为创业公司所能投入（或者决策层当时愿意投入）的开发资源有限。所以本身对整个公司无论是业务还是技术团队的要求就很高。所投入资源不够应付业务要求。

领导层、业务部门和技术部门的写作方式不够成熟。

技术架构落后，影响开发效率。由于系统是从个人网站演变过来，早期是一个php网站程序，加一个php后台交易引擎。前端交互通过http表单提交。技术上难以实现产品经理设计出的复杂交互，后来前端部分一路从jquery,angular到reactor一路摸索，但是最后一个没有完全实现前端页面的统一架构。

代码review没有制度化
unit test，没有覆盖全系统
integration test没有  (dependent on other system, db, Integration testing is starts with the interface specification.)
e2e test没有

pipeline简单，只用jenkins

web server手工扩展，服务器配种手工。

没有充分利用云服务实现基于镜像的发布，云服务器不敢动。

开发，测试和生产环境差异大。

配置管理全手动

日志管理简单

监控nagios


Seedlink

发布粒度大
发布周期长
无自动测试